--- 
wordpress_id: 64
layout: post
title: Configuring Single Blog/Gallery in Community Server v2.0beta3
wordpress_url: /archive/configuring-single-blog-gallery-in-community-server-v2-0beta3/
---

<p>As I had eluded to before, configuring a site to use a single blog or gallery in Community Server v2.0 beta3 and beyond will be incredibly easy.</p>
<p>In the past, this type of configuration has been achieved by manipulating the URL rewriting within Community Server to tell it which blog/gallery to use without it being in the URL.&nbsp; In v1.0, it was a somewhat complicated process.&nbsp; Then in v1.1, I came up with the idea of using a small application to generate the needed SiteUrls.config file.&nbsp; For the most part, this worked, however things would get incredibly more complicated as the number of varying configuration mounted.&nbsp; Most especially, when people wanted to have their blog in the root, and then other parts of the application underneath it.&nbsp; It would get complicated where Community Server would mistake a request for the Photo Galleries as one for the blogs because of how the URL rewriting worked and was manipulated.</p>
<p>In talked with Scott Watermasysk, we came up with the idea of having some sort of URL mapping that would be done before the rewriting happened.&nbsp; This would allow a request for /blog/ to be translated behind the scenes to /blogs/kensblog/ before the URL rewriting occurred, and completely unbeknownst to the user.&nbsp; An implementation of this idea is included in Community Server v2.0 beta3, however it is quite the optimal way to handle a blog/gallery in the root, and I think it could be made even simplier.&nbsp; It directly tied the folder (ie, /blog/ or /rants/) to the Application Key that would be required on the blog (ie, blog, or rants, respectively).</p>
<p>I’d come up with a slightly extended version, which I called Extended Mappings.&nbsp; EMs basically allowed you to handle the remapping directly by the URL rather than by basing it on the folder name = application key.</p>
<p>Ok, so now to get to the point, you want to know exactly how easy will a single blog/gallery be with my Extended Mappings?&nbsp; All it takes to install and configure it is these 3 easy steps:</p>
<p>1) Drop the DLL in the bin directory of Community Server</p>
<p>2) Change a provider entry in the communityserver.org and add a new provider entry (matter of cut and pasting).</p>
<p>3) Add the following section to the SiteUrls.config and set to your liking:</p><font color=#0000ff size=2>
<blockquote dir=ltr style="MARGIN-RIGHT: 0px">
<p>&lt;<font color=#800000 size=2>extendedMappings</font><font color=#0000ff size=2>&gt;<br /></font><font color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color=#800000 size=2>add</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>path</font><font color=#0000ff size=2>="/blog"</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>newPath</font><font color=#0000ff size=2>="/blogs/blog"</font><font color=#ff00ff size=2> </font><font color=#0000ff size=2>/&gt;<br /></font><font color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color=#800000 size=2>add</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>path</font><font color=#0000ff size=2>="/photos"</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>newPath</font><font color=#0000ff size=2>="/photos/photos"</font><font color=#ff00ff size=2> </font><font color=#0000ff size=2>/&gt;<br /></font><font color=#0000ff size=2>&lt;/</font><font color=#800000 size=2>extendedMappings</font><font color=#0000ff size=2>&gt;</font>
<p>That is it!&nbsp; The “path” property is the path <em>you</em> want it to work at, and the “newPath” is the path <em>Community Server</em> expects it at.&nbsp; IE, all blogs default to /blogs/{appkey}/.&nbsp; So if you want a blog with the application key of “kensrants” to work at “/rants/”.&nbsp; You’d do:</p>
<blockquote dir=ltr style="MARGIN-RIGHT: 0px">
<p><font size=2><font color=#0000ff>&lt;</font><font color=#800000>add</font><font color=#ff00ff> </font><font color=#ff0000>path</font><font color=#0000ff>="/rants"</font><font color=#ff00ff> </font><font color=#ff0000>newPath</font><font color=#0000ff>="/blogs/kensrants"</font><font color=#ff00ff> </font><font color=#0000ff>/&gt;</font></font></p></blockquote>
<p>That is all!&nbsp; <strong>And the best part</strong>, if you want your blog at the root, all you do is change the path to “/”.&nbsp; That is it!&nbsp; Additionally, there is no need to worry about Community Server to mistake a request for you gallery as one for your blog, because using the extended mappings, it will ensure that an exact match is found before allowing the rewritten URL to be accepted.&nbsp; So if it match in the blog’s mapping&nbsp;is not found, it will continue on to the galleries and so on.</p>
<p>I will be releasing this module once Beta3 hits the streets, so watch for it soon. <img src="http://test.qgyen.net/files/1195/download.aspx" /></p></p></blockquote></font>
         
