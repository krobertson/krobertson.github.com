<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head profile="http://gmpg.org/xfn/11">
    <title>You got RVM and git in my command prompt! &mdash; In Valid Logic</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Endlessly expanding technology" />
    <meta name="author" content="Ken Robertson" />
    <meta name="generator" content="jekyll" />

    <link href="/css/site.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="/css/pygments/trac.css" rel="stylesheet" type="text/css" media="screen" />

    <link href="/atom.xml" rel="alternate" title="Ken Robertson's Atom Feed" type="application/atom+xml" />
    <link href="/rss.xml" rel="alternate" title="Ken Robertson's RSS Feed" type="application/rss+xml" />

    <link rel='index' title='In Valid Logic' href='http://invalidlogic.com/' />
  </head>

<body>
  <div id="container" class="group">

    <h1><a href="http://invalidlogic.com">In Valid Logic</a></h1>
    <div id="bubble"><p>Endlessly expanding technology</p></div>

    <div id="content" class="group">
      <h2>You got RVM and git in my command prompt!</h2>

<div class="main">
  <p>I had posted this to our internal wiki at work, but <a href="http://twitter.com/scottw">Scott</a> had mentioned he <a href="http://twitter.com/scottw/status/24492462082">was interested in it</a>, so figured I'd throw it up here.</p>

<p>Zsh is the best shell.  If you don't know, <a href="http://www.zsh.org/">now you know</a>.</p>

<p>One thing that is a nice convenience is to setup the command prompt to include your current Ruby implementation, RVM gemset, and which branch of the git repository you are in.  In our main codebase at Involver, my prompt looks like this:</p>

<div align="center"><img src="http://img.skitch.com/20100916-r1s8h53qw3pc718fnb4fnrsefy.jpg" alt="prompt" width="496" height="84" /></div>


<p>From this, I can tell I'm using JRuby 1.5.1, the "involver" gemset.  I'm in the "topsecret" project folder (I just have the current directory, not the full path), and the "git:master" indicates its a git repository and I'm in the master branch.</p>

<p>To achieve that, add the following into your .zshrc or one of the files you source into it.</p>

<div class="highlight"><pre><code class="text"><span class="lineno"> 1</span> parse_git_branch() {
<span class="lineno"> 2</span>   git branch 2&gt; /dev/null | sed -e &#39;/^[^*]/d&#39; -e &#39;s/* \(.*\)/\/git:\1/&#39;
<span class="lineno"> 3</span> }
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> rvm_prompt() {
<span class="lineno"> 6</span>   $HOME/.rvm/bin/rvm-prompt v g
<span class="lineno"> 7</span> }
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> export PS1=&#39;%{$reset_color$fg[blue]%}$(rvm_prompt)%{$reset_color$fg[gray]%}:
<span class="lineno">10</span> %1~%{$reset_color$bold_color$fg[green]%}%{$reset_color$fg[green]%}
<span class="lineno">11</span> $(parse_git_branch)&gt;%{$reset_color%} &#39;
</code></pre>
</div>


<p>There are of course many more things you can do with zsh.  I have this and other tidbits in my <a href="http://github.com/krobertson/dotfiles">dotfiles repo</a> on Github.  And now that I think of it, have some stuff I haven't checked in since I'm not in TextMate/Ruby/zsh all day.</p>

</div>

<div class="meta group">
  <div class="signature">
    <p>Thursday, September 16, 2010</p>
  </div>	
  <div class="tags">
    &nbsp;
  </div>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'invalidlogic'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="paginator">
  
    <div class="previous">&larr; <a class="previous" href="/2010/09/08/the-future-of-papercut/" title="Previous post: The Future of Papercut">The Future of Papercut</a></div>
  
  
  
    <div class="next"><a class="next" href="/2010/10/08/involver-team-and-matz/" title="Next post: Involver Team and Matz">Involver Team and Matz</a> &rarr;</div>
  
</div>
    </div>

    <div id="sidebar">
      <h3>About</h3>
      <div class="textwidget">
        This is the personal blog of Ken Robertson.  I'm a developer at <a href="http://involver.com/">Involver</a> working in Ruby/Rails.  In a former life, I worked in .NET for many years and since moved on.<br/>
        <br/>
        Now, I get to make Rails scale, cook all day long with chef, and experiment with building highly concurrent systems.<br/>
        <br/>
        In my spare time, I like to build things.  I like to experiment with different technologies to find how they best fit onto my utility belt.<br/>
        <br/>
        I sometimes blog.  You'll find those things here.<br/>
        <br/>
        I sometimes code.  You'll find those on <a href="http://github.com/krobertson">Github</a>.<br/>
      </div>

      <h3>Search</h3>
      <form method="get" action="http://www.google.com/search">
        <div>
          <label class="screen-reader-text" for="s">Search for:</label>
          <input type="text" id="s" name="q" value="" />
          <input type="hidden" name="q" value="site:invalidlogic.com" />
          <input type="submit" id="searchsubmit" value="Search" />
        </div>
      </form>

      <h3>Recent Posts</h3>
      <ul>
        
          <li><a href="/2011/02/07/how-a-deprecated-method-can-take-down-a-process/">How a deprecated method can take down a process</a></li>
        
          <li><a href="/2011/01/19/love-your-dependency-management/">Love your dependency management</a></li>
        
          <li><a href="/2010/12/08/progress-through-iterating/">Progress through iterating</a></li>
        
          <li><a href="/2010/10/25/tool-enlightenment-part-2/">Tool Enlightenment, Part 2</a></li>
        
          <li><a href="/2010/10/14/tool-enlightenment/">Tool Enlightenment</a></li>
        
    	</ul>
    </div>

  </div>

  <div id="footer">
    <p>The Journalist template by <a href="http://lucianmarin.com/" rel="designer">Lucian E. Marin</a></p>
  </div>
</body>
</html>