<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head profile="http://gmpg.org/xfn/11">
    <title>Configuring Single Blog/Gallery in Community Server v2.0beta3 &mdash; In Valid Logic</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Endlessly expanding technology" />
    <meta name="author" content="Ken Robertson" />
    <meta name="generator" content="jekyll" />

    <link href="/css/site.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="/css/pygments/trac.css" rel="stylesheet" type="text/css" media="screen" />

    <link href="/atom.xml" rel="alternate" title="Ken Robertson's Atom Feed" type="application/atom+xml" />
    <link href="/rss.xml" rel="alternate" title="Ken Robertson's RSS Feed" type="application/rss+xml" />

    <link rel='index' title='In Valid Logic' href='http://invalidlogic.com/' />
  </head>

<body>
  <div id="container" class="group">

    <h1><a href="http://invalidlogic.com">In Valid Logic</a></h1>
    <div id="bubble"><p>Endlessly expanding technology</p></div>

    <div id="content" class="group">
      <h2>Configuring Single Blog/Gallery in Community Server v2.0beta3</h2>

<div class="main">
  <p>As I had eluded to before, configuring a site to use a single blog or gallery in Community Server v2.0 beta3 and beyond will be incredibly easy.</p>


<p>In the past, this type of configuration has been achieved by manipulating the URL rewriting within Community Server to tell it which blog/gallery to use without it being in the URL.&nbsp; In v1.0, it was a somewhat complicated process.&nbsp; Then in v1.1, I came up with the idea of using a small application to generate the needed SiteUrls.config file.&nbsp; For the most part, this worked, however things would get incredibly more complicated as the number of varying configuration mounted.&nbsp; Most especially, when people wanted to have their blog in the root, and then other parts of the application underneath it.&nbsp; It would get complicated where Community Server would mistake a request for the Photo Galleries as one for the blogs because of how the URL rewriting worked and was manipulated.</p>


<p>In talked with Scott Watermasysk, we came up with the idea of having some sort of URL mapping that would be done before the rewriting happened.&nbsp; This would allow a request for /blog/ to be translated behind the scenes to /blogs/kensblog/ before the URL rewriting occurred, and completely unbeknownst to the user.&nbsp; An implementation of this idea is included in Community Server v2.0 beta3, however it is quite the optimal way to handle a blog/gallery in the root, and I think it could be made even simplier.&nbsp; It directly tied the folder (ie, /blog/ or /rants/) to the Application Key that would be required on the blog (ie, blog, or rants, respectively).</p>


<p>I’d come up with a slightly extended version, which I called Extended Mappings.&nbsp; EMs basically allowed you to handle the remapping directly by the URL rather than by basing it on the folder name = application key.</p>


<p>Ok, so now to get to the point, you want to know exactly how easy will a single blog/gallery be with my Extended Mappings?&nbsp; All it takes to install and configure it is these 3 easy steps:</p>


<p>1) Drop the DLL in the bin directory of Community Server</p>


<p>2) Change a provider entry in the communityserver.org and add a new provider entry (matter of cut and pasting).</p>


<p>3) Add the following section to the SiteUrls.config and set to your liking:</p>


<p><font color=#0000ff size=2></p>

<blockquote dir=ltr style="MARGIN-RIGHT: 0px">
<p>&lt;<font color=#800000 size=2>extendedMappings</font><font color=#0000ff size=2>&gt;<br /></font><font color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color=#800000 size=2>add</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>path</font><font color=#0000ff size=2>="/blog"</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>newPath</font><font color=#0000ff size=2>="/blogs/blog"</font><font color=#ff00ff size=2> </font><font color=#0000ff size=2>/&gt;<br /></font><font color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; &lt;</font><font color=#800000 size=2>add</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>path</font><font color=#0000ff size=2>="/photos"</font><font color=#ff00ff size=2> </font><font color=#ff0000 size=2>newPath</font><font color=#0000ff size=2>="/photos/photos"</font><font color=#ff00ff size=2> </font><font color=#0000ff size=2>/&gt;<br /></font><font color=#0000ff size=2>&lt;/</font><font color=#800000 size=2>extendedMappings</font><font color=#0000ff size=2>&gt;</font>
<p>That is it!&nbsp; The “path” property is the path <em>you</em> want it to work at, and the “newPath” is the path <em>Community Server</em> expects it at.&nbsp; IE, all blogs default to /blogs/{appkey}/.&nbsp; So if you want a blog with the application key of “kensrants” to work at “/rants/”.&nbsp; You’d do:</p>
<blockquote dir=ltr style="MARGIN-RIGHT: 0px">
<p><font size=2><font color=#0000ff>&lt;</font><font color=#800000>add</font><font color=#ff00ff> </font><font color=#ff0000>path</font><font color=#0000ff>="/rants"</font><font color=#ff00ff> </font><font color=#ff0000>newPath</font><font color=#0000ff>="/blogs/kensrants"</font><font color=#ff00ff> </font><font color=#0000ff>/&gt;</font></font></p></blockquote>
<p>That is all!&nbsp; <strong>And the best part</strong>, if you want your blog at the root, all you do is change the path to “/”.&nbsp; That is it!&nbsp; Additionally, there is no need to worry about Community Server to mistake a request for you gallery as one for your blog, because using the extended mappings, it will ensure that an exact match is found before allowing the rewritten URL to be accepted.&nbsp; So if it match in the blog’s mapping&nbsp;is not found, it will continue on to the galleries and so on.</p>
<p>I will be releasing this module once Beta3 hits the streets, so watch for it soon. <img src="http://test.qgyen.net/files/1195/download.aspx" /></p></p></blockquote>


<p></font></p>

</div>

<div class="meta group">
  <div class="signature">
    <p>Monday, January 09, 2006</p>
  </div>	
  <div class="tags">
    &nbsp;
  </div>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'invalidlogic'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="paginator">
  
    <div class="previous">&larr; <a class="previous" href="/2006/01/06/big-night-tonight/" title="Previous post: Big night tonight!">Big night tonight!</a></div>
  
  
  
    <div class="next"><a class="next" href="/2006/01/09/frustrating/" title="Next post: Frustrating...">Frustrating...</a> &rarr;</div>
  
</div>
    </div>

    <div id="sidebar">
      <h3>About</h3>
      <div class="textwidget">
        This is the personal blog of Ken Robertson.  I'm a developer at <a href="http://involver.com/">Involver</a> working in Ruby/Rails.  In a former life, I worked in .NET for many years and since moved on.<br/>
        <br/>
        Now, I get to make Rails scale, cook all day long with chef, and experiment with building highly concurrent systems.<br/>
        <br/>
        In my spare time, I like to build things.  I like to experiment with different technologies to find how they best fit onto my utility belt.<br/>
        <br/>
        I sometimes blog.  You'll find those things here.<br/>
        <br/>
        I sometimes code.  You'll find those on <a href="http://github.com/krobertson">Github</a>.<br/>
      </div>

      <h3>Search</h3>
      <form method="get" action="http://www.google.com/search">
        <div>
          <label class="screen-reader-text" for="s">Search for:</label>
          <input type="text" id="s" name="q" value="" />
          <input type="hidden" name="q" value="site:invalidlogic.com" />
          <input type="submit" id="searchsubmit" value="Search" />
        </div>
      </form>

      <h3>Recent Posts</h3>
      <ul>
        
          <li><a href="/2011/02/11/how-we-did-a-datacenter-migration-with-no-downtime/">How we did a datacenter migration with no downtime</a></li>
        
          <li><a href="/2011/02/07/how-a-deprecated-method-can-take-down-a-process/">How a deprecated method can take down a process</a></li>
        
          <li><a href="/2011/01/19/love-your-dependency-management/">Love your dependency management</a></li>
        
          <li><a href="/2010/12/08/progress-through-iterating/">Progress through iterating</a></li>
        
          <li><a href="/2010/10/25/tool-enlightenment-part-2/">Tool Enlightenment, Part 2</a></li>
        
    	</ul>
    </div>

  </div>

  <div id="footer">
    <p>The Journalist template by <a href="http://lucianmarin.com/" rel="designer">Lucian E. Marin</a></p>
  </div>
</body>
</html>