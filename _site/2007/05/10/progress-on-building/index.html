<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head profile="http://gmpg.org/xfn/11">
    <title>Progress on building &mdash; In Valid Logic</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Endlessly expanding technology" />
    <meta name="author" content="Ken Robertson" />
    <meta name="generator" content="jekyll" />

    <link href="/css/site.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="/css/pygments/trac.css" rel="stylesheet" type="text/css" media="screen" />

    <link href="/atom.xml" rel="alternate" title="Ken Robertson's Atom Feed" type="application/atom+xml" />
    <link href="/rss.xml" rel="alternate" title="Ken Robertson's RSS Feed" type="application/rss+xml" />

    <link rel='index' title='In Valid Logic' href='http://invalidlogic.com/' />
  </head>

<body>
  <div id="container" class="group">

    <h1><a href="http://invalidlogic.com">In Valid Logic</a></h1>
    <div id="bubble"><p>Endlessly expanding technology</p></div>

    <div id="content" class="group">
      <h2>Progress on building</h2>

<div class="main">
  <p>I&#39;ve really been getting up to speed on using MSBuild and think I have a very nice base set of build scripts.&nbsp; I basically took the scripts from <a href="http://dotnet.org.za/cjlotz/archive/2007/04/04/part-1-continuous-integration-using-msbuild-cruisecontrol-net-fxcop-nunit-ncover-subversion.aspx">Carel Lotz&#39;s series</a> and created a nice set of common build tasks for building and unit testing projects, and have done it in a way so that I can easily override paths or override the build progress.&nbsp; For instance, since we already have continuous integration on CS, I just have it build CS (it doesn&#39;t do tests or code analysis) and copy all the DLLs and any reference DLLs into a kind of &quot;latest good build&quot; location.&nbsp; Then I currently have the News Gateway add-on setup so that when it goes to build, it will first copy the DLLs from the latest good build of CS, and then it goes through the News Gateway project files and remaps all its external references to its latest DLLs of CS, and then it gets built, tested, and periodically analyses.</p>


<p> <p>So far, I have created two custom build tasks for MSBuild.&nbsp; First, I created one called GetProjectReferences, which basically returns the file location of all external references for a given set of project files.&nbsp; This is used so I can copy both the compiled output of a project and all of its references to a common folder, so that any other projects that reference it can get all of the dependent files very easily.</p> <p>Second, I&#39;ve created a task called UpdateProjectReferences&nbsp;that lets you remap all of the external references in a set of project files to a certain directory.&nbsp; In the CS Subversion repository, we already have a set file structure and it works pretty well <em>for development purposes</em>.&nbsp; For the add-ons, the inter dependencies between the projects can become chaotic.&nbsp; Often, the add-ons build against the output in the latest CS Web\bin folder, since it provides an easy way to link to the latest project output without having to check compiled project assemblies into Subversion (since we previously did that when we used Vault and it wasn&#39;t the best) and it also avoids project references, since those can get hairy.&nbsp; But this can be a problem when it downloads News Gateway to build, as it just gets News Gateway, not it and CS.&nbsp; So what it does is it updates the references to a local set that it knows are valid, recent, and good to compile against.</p> <p>I&#39;ll probably end up looking into&nbsp;contributing some of these tasks back to the <a href="http://msbuildtasks.tigris.org/">MSBuild Community Tasks</a> project.</p></p>

</div>

<div class="meta group">
  <div class="signature">
    <p>Thursday, May 10, 2007</p>
  </div>	
  <div class="tags">
    &nbsp;
  </div>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'invalidlogic'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="paginator">
  
    <div class="previous">&larr; <a class="previous" href="/2007/05/09/follow-up-on-msbuild/" title="Previous post: Follow up on MSBuild">Follow up on MSBuild</a></div>
  
  
  
    <div class="next"><a class="next" href="/2007/05/15/qgyen-lightbox-for-community-server-2007/" title="Next post: Qgyen.Lightbox for Community Server 2007">Qgyen.Lightbox for Community Server 2007</a> &rarr;</div>
  
</div>
    </div>

    <div id="sidebar">
      <h3>About</h3>
      <div class="textwidget">
        This is the personal blog of Ken Robertson.  I'm a developer at <a href="http://involver.com/">Involver</a> working in Ruby/Rails.  In a former life, I worked in .NET for many years and since moved on.<br/>
        <br/>
        Now, I get to make Rails scale, cook all day long with chef, and experiment with building highly concurrent systems.<br/>
        <br/>
        In my spare time, I like to build things.  I like to experiment with different technologies to find how they best fit onto my utility belt.<br/>
        <br/>
        I sometimes blog.  You'll find those things here.<br/>
        <br/>
        I sometimes code.  You'll find those on <a href="http://github.com/krobertson">Github</a>.<br/>
      </div>

      <h3>Search</h3>
      <form method="get" action="http://www.google.com/search">
        <div>
          <label class="screen-reader-text" for="s">Search for:</label>
          <input type="text" id="s" name="q" value="" />
          <input type="hidden" name="q" value="site:invalidlogic.com" />
          <input type="submit" id="searchsubmit" value="Search" />
        </div>
      </form>

      <h3>Recent Posts</h3>
      <ul>
        
          <li><a href="/2011/04/12/serving-static-content-via-post-from-nginx/">Serving Static Content Via POST From Nginx</a></li>
        
          <li><a href="/2011/02/16/our-pain-points-with-ec2/">Our pain points with EC2 and how our moved solved them</a></li>
        
          <li><a href="/2011/02/11/how-we-did-a-datacenter-migration-with-no-downtime/">How we did a datacenter migration with no downtime</a></li>
        
          <li><a href="/2011/02/07/how-a-deprecated-method-can-take-down-a-process/">How a deprecated method can take down a process</a></li>
        
          <li><a href="/2011/01/19/love-your-dependency-management/">Love your dependency management</a></li>
        
    	</ul>
    </div>

  </div>

  <div id="footer">
    <p>The Journalist template by <a href="http://lucianmarin.com/" rel="designer">Lucian E. Marin</a></p>
  </div>
</body>
</html>